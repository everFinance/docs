"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[1375],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return f}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),p=d(n),m=r,f=p["".concat(s,".").concat(m)]||p[m]||u[m]||i;return n?a.createElement(f,l(l({ref:t},c),{},{components:n})):a.createElement(f,l({ref:t},c))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[p]="string"==typeof e?e:r,l[1]=o;for(var d=2;d<i;d++)l[d]=n[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2856:function(e,t,n){n.r(t),n.d(t,{assets:function(){return s},contentTitle:function(){return l},default:function(){return u},frontMatter:function(){return i},metadata:function(){return o},toc:function(){return d}});var a=n(3117),r=(n(7294),n(3905));const i={sidebar_position:7},l="Bundle",o={unversionedId:"guide/dive/bundle",id:"guide/dive/bundle",title:"Bundle",description:"bundle transaction extend the 'transfer' transaction to include external transfer for the original 'transfer' function, as well as internal batch transfers via a specific data field.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/guide/dive/bundle.md",sourceDirName:"guide/dive",slug:"/guide/dive/bundle",permalink:"/en/docs/guide/dive/bundle",draft:!1,editUrl:"https://github.com/everFinance/docs/edit/master/i18n/en/docusaurus-plugin-content-docs/current/guide/dive/bundle.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"guide",previous:{title:"Withdraw",permalink:"/en/docs/guide/dive/withdraw"},next:{title:"Storage Based Computation Paradigm",permalink:"/en/docs/guide/refrence/storage-based-computation-paradigm"}},s={},d=[{value:"Schema",id:"schema",level:2},{value:"Data Generate Description",id:"data-generate-description",level:2},{value:"<code>internalItem</code>",id:"internalitem",level:3},{value:"bundleData",id:"bundledata",level:3},{value:"<code>sigs</code> signature structure",id:"sigs-signature-structure",level:3},{value:"data generation example",id:"data-generation-example",level:3},{value:"External and internal transactions",id:"external-and-internal-transactions",level:2},{value:"Transaction signature, sending and record acquisition",id:"transaction-signature-sending-and-record-acquisition",level:2}],c={toc:d},p="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(p,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"bundle"},"Bundle"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"bundle")," transaction extend the ",(0,r.kt)("inlineCode",{parentName:"p"},"'transfer'")," transaction to include external transfer for the original ",(0,r.kt)("inlineCode",{parentName:"p"},"'transfer'")," function, as well as internal batch transfers via a specific ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," field."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," contains multiple internal transfer transactions and also contains the signatures of the ",(0,r.kt)("inlineCode",{parentName:"p"},"from")," accounts for all transfer transactions in these internal transfer transactions."),(0,r.kt)("p",null,"All internal transfers in ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," must succeed, and if one fails, all internal transfers are rolled back. A ",(0,r.kt)("inlineCode",{parentName:"p"},"bundle")," transaction can only be executed once, regardless of whether the internal transfer succeeds or fails, and cannot be executed twice after execution."),(0,r.kt)("h2",{id:"schema"},"Schema"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Field"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"tokenSymbol"),(0,r.kt)("td",{parentName:"tr",align:null},"Token Symbol")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"action"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"'bundle'")," to batch execute internal transfers")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"from"),(0,r.kt)("td",{parentName:"tr",align:null},"the current everPay account ID that signed the transaction")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"to"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"to")," represents the everPay account ID of the external transfer recipient, which can be any everPay account ID (including the current everPay account ID of the signed transaction)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"amount"),(0,r.kt)("td",{parentName:"tr",align:null},"External transfer amount, type uint; ",(0,r.kt)("inlineCode",{parentName:"td"},"decimals")," processing is required for setting, e.g. 0.1USDT, after USDT's ",(0,r.kt)("inlineCode",{parentName:"td"},"decimals: 6")," processing, it's 100000")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"fee"),(0,r.kt)("td",{parentName:"tr",align:null},"Handling fee, type uint. needs to be decimals, e.g. 0.1USDT, here it's 100000 after USDT's ",(0,r.kt)("inlineCode",{parentName:"td"},"decimals: 6")," processing")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"feeRecipient"),(0,r.kt)("td",{parentName:"tr",align:null},"Receive everPay account ID for handling fees, via ",(0,r.kt)("a",{parentName:"td",href:"../../sdk/server-api/basic-api/info"},"info API")," interface to get")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nonce"),(0,r.kt)("td",{parentName:"tr",align:null},"unix milliseconds")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"tokenID"),(0,r.kt)("td",{parentName:"tr",align:null},"via ",(0,r.kt)("a",{parentName:"td",href:"../../sdk/server-api/basic-api/info"},"info API")," interface, must be consistent with the token ",(0,r.kt)("inlineCode",{parentName:"td"},"id")," field ",(0,r.kt)("strong",{parentName:"td"},"corresponding to ",(0,r.kt)("inlineCode",{parentName:"strong"},"tokenSymbol")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"chainType"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"chainType")," must be the same as ",(0,r.kt)("a",{parentName:"td",href:"../../sdk/server-api/basic-api/info"},"info API"),", the token ",(0,r.kt)("inlineCode",{parentName:"td"},"chainType")," ",(0,r.kt)("strong",{parentName:"td"},"consistent"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"chainID"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"chainID")," must be the same as ",(0,r.kt)("a",{parentName:"td",href:"../../sdk/server-api/basic-api/info"},"info API"),", the token ",(0,r.kt)("inlineCode",{parentName:"td"},"chainID")," ",(0,r.kt)("strong",{parentName:"td"},"consistent"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"data"),(0,r.kt)("td",{parentName:"tr",align:null},"Specific JSON format for bundle transfer function, see below ",(0,r.kt)("a",{parentName:"td",href:"#data-generate-gescription"},"Data Generate Description"))))),(0,r.kt)("h2",{id:"data-generate-description"},"Data Generate Description"),(0,r.kt)("h3",{id:"internalitem"},(0,r.kt)("inlineCode",{parentName:"h3"},"internalItem")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"internalItem")," for each internal transfer transaction."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Field"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"tag"),(0,r.kt)("td",{parentName:"tr",align:null},"combined by ",(0,r.kt)("inlineCode",{parentName:"td"},"chainType"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"symbol"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"id")," via ",(0,r.kt)("inlineCode",{parentName:"td"},"-"),", or via ",(0,r.kt)("a",{parentName:"td",href:"../../sdk/server-api/basic-api/info"},"info API")," to get")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"chainID"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"chainID")," is the same as ",(0,r.kt)("a",{parentName:"td",href:"../../sdk/server-api/basic-api/info"},"info API"),", the token ",(0,r.kt)("inlineCode",{parentName:"td"},"chainID")," ",(0,r.kt)("strong",{parentName:"td"},"consistent"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"from"),(0,r.kt)("td",{parentName:"tr",align:null},"The everPay account ID of the transferor of the assets of this internal transfer transaction")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"to"),(0,r.kt)("td",{parentName:"tr",align:null},"The everPay account ID of the recipient of the asset for this internal transfer transaction")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"amount"),(0,r.kt)("td",{parentName:"tr",align:null},"Amount of this internal transfer transaction asset. type uint; ",(0,r.kt)("inlineCode",{parentName:"td"},"decimals")," processing is required for setting, e.g. 0.1USDT, after USDT's ",(0,r.kt)("inlineCode",{parentName:"td"},"decimals: 6")," processing, it's 100000")))),(0,r.kt)("h3",{id:"bundledata"},"bundleData"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Field"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"items"),(0,r.kt)("td",{parentName:"tr",align:null},"Consists of multiple ",(0,r.kt)("inlineCode",{parentName:"td"},"internalItem")," internal transfer transactions")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"expiration"),(0,r.kt)("td",{parentName:"tr",align:null},"Expiration time of all internal transfer transactions, unix timestamp. ",(0,r.kt)("strong",{parentName:"td"},"Note: not millisecond timestamp"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"salt"),(0,r.kt)("td",{parentName:"tr",align:null},"Must be a ",(0,r.kt)("a",{parentName:"td",href:"https://en.wikipedia.org/wiki/Universally_unique_identifier"},(0,r.kt)("inlineCode",{parentName:"a"},"uuid"))," format string for unique identification")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"version"),(0,r.kt)("td",{parentName:"tr",align:null},"bundle version ",(0,r.kt)("inlineCode",{parentName:"td"},"'v1'"))))),(0,r.kt)("h3",{id:"sigs-signature-structure"},(0,r.kt)("inlineCode",{parentName:"h3"},"sigs")," signature structure"),(0,r.kt)("p",null,"The data structure obtained all ",(0,r.kt)("inlineCode",{parentName:"p"},"from")," corresponding everPay accounts' signature. ",(0,r.kt)("strong",{parentName:"p"},"the JSON string from the ",(0,r.kt)("inlineCode",{parentName:"strong"},"bundle")," message")," used to be sign message."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Signature generation rules are the same as ",(0,r.kt)("a",{parentName:"strong",href:"./transaction#signature"},"everPay transaction signature"),".")," Converts ",(0,r.kt)("inlineCode",{parentName:"p"},"bundleData")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"messageData")," by ",(0,r.kt)("inlineCode",{parentName:"p"},"const messageData = JSON.stringfiy(bundleData)")," and then performs subsequent signature processing."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"const sigs = {\n  [fromAccount1]: sig1,\n  [fromAccount2]: sig2,\n  // etc.\n}\n")),(0,r.kt)("h3",{id:"data-generation-example"},"data generation example"),(0,r.kt)("admonition",{type:"danger"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"To ensure that the ",(0,r.kt)("inlineCode",{parentName:"li"},"messageData")," used for signature verification is consistent, the order of the ",(0,r.kt)("inlineCode",{parentName:"li"},"internalItem")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"bundleData")," fields must be consistent with the example in order for the signature verification to pass correctly."),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"signBundleData")," in the example is pseudocode, after converting ",(0,r.kt)("inlineCode",{parentName:"li"},"bundleData")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"messageData")," by ",(0,r.kt)("inlineCode",{parentName:"li"},"const messageData = JSON.stringfiy(bundleData)"),", the subsequent signature generation rules are the same as ",(0,r.kt)("a",{parentName:"li",href:"./transaction#signature"},"everPay transaction signature"),"."))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"const internalItem1 = {\n  tag: 'ethereum-eth-0x0000000000000000000000000000000000000000',\n  chainID: '42',\n  from: '0x26361130d5d6E798E9319114643AF8c868412859',\n  to: '5NPqYBdIsIpJzPeYixuz7BEH_W7BEk_mb8HxBD3OHXo',\n  amount: '1000000000000000'\n}\nconst internalItem2 = {\n  tag: 'ethereum-usdt-0xd85476c906b5301e8e9eb58d174a6f96b9dfc5ee',\n  chainID: '42',\n  from: '5NPqYBdIsIpJzPeYixuz7BEH_W7BEk_mb8HxBD3OHXo',\n  to: '0x26361130d5d6E798E9319114643AF8c868412859',\n  amount: '10000000'\n}\nconst bundleData = {\n  items: [internalItem1, internalItem2],\n  expiration: 1630490852,\n  salt: '23b35070-c5a5-4c66-94f8-ad6064ab5cfc',\n  version: 'v1'\n}\nconst messageData = JSON.stringify(bundleData)\n\n// \"IWoPLghaVs-rD7Gn-Kc5UVB5LwIZhIwGNwK2bN9gikLid1bb8im9Hvfqb2on7K-FiJ1U77fkQSGcMfVbyNeNdbSslIIb-NvtUHQs3Y7jWQBU_TtOyGkcoNkRPXkAYOMaOSgbmZKV3GL4FwuYbO5YfQHomfpIzX5AGk1miPU19lo9IVpPmjJ_youk52pX41rBlTQm6DP76FNMppxC8rXnIDf-o-OMRK_Q0R6QZjUVhpFCBIVNq8P7J4Wm0yTA8QY7A68W2abmC4CU6pa9_ZSYOfcMHypUxIsA9V0nPiCYvOw83jvK2DcFtO3CaAUAiKoj5xdCIXnixNFN-arLa6de0ZOSQRwCxgYxs6w8UhAD-vFapG3cs6dzhYAYDKHuAlKqfaO_z1XToBdjwp0f9eIytJhWVOLLJSVR_1LRvsSc9yDvVk_D4nCeR2BTtevZmw9st1m8pQanqObn_G0qVUHdtkxxalwDdmr_fUEukeSOrzMuQlZ3IjpcKqUXsNqcxqg9uledNLE2yRo6VvXaoWjLOwLvMLBMQ18HGUVbr-I1M-bmX953S2NI43eBjVo0VAYRypBBewSflQE1Ief4xY-cu6-jhRLJYWTpQDup5gOY4O4DLE89GelkP7PsIsm3ZMF_qalOKoqswiEReBCJ4-s1X6Seg4q1kkB6ECT7ZieLmwc,odtNk97a4PARR0I8g3kQpzlFVmPg-udyjfl81fbTioyP2pEw5tP5A1-FVqR-QFFPskW-j7yAze5usYNWHEir7oVQ9d9bbkcZIDEPqwSTO1JoD1BKXeeBK0xsmiSgxeY7uuRXWdhXREhlmIMsV8ObakEeXdbbxbs89XaZHBuES7boASrRVDXRz_mhMu6u_58OdLeMwR3I1BCH6nphNGVOehA7GOOqEBvtesBset0bNaLCb0JpSg5ZW_0AGLP-XydzE3IPLLx4NQEEJY21y8fChxYM4jntI78l5hojp9NlmS69EXlj0PoMjsbaWaz9WtnZaMAbnaOGAHhv8Y_TNmBI0FHpqHaGPP906Mnrgdm3tl2L40EX-Q6-liNVkB56CmPxXzSesu-4x5LLYxQ-aX3W6Hj7RCDTacxqUJHzOrhJqXSx6Jx0t8CwyfReMgVv4p5t1C3OZ8yYbJ_H3LdkeriVniaC5jQdMyIJ6QBMzr1XdXIw9WuEG2kCIYtvOp2qDuu9o2SY-9W4Yv7VWRDfWO38xxR4ZO65MMAdZxeaZ4w8sK_owH46Wm0XoT3Al-LPypaeijWqlHEu4R8c2ersD3xkDvXC_lNtaQw_qyfI3UEH5fWupY4zhZeDGkvXQh32Fv4CxlZL58iUHv9SvR7p5LgBCC3AVUbn7Sqc4xPUCZMj-Tc\"\nconst sigFromAccount1 = await everpayArAccount.signBundleData(bundleData)\n\n// \"0x1cf47183f48c17393e2728b92031eb9f56fc7f89011c618e0cb1d163761b7dbe6e615091f15075b673422a0b1bc363d1ab341cbcee831c1632282e33feda79d21c\"\nconst sigFromAccount2 = await everpayEthAccount.signBundleData(bundleData)\n\nconst sigs = {\n  '5NPqYBdIsIpJzPeYixuz7BEH_W7BEk_mb8HxBD3OHXo': 'IWoPLghaVs-rD7Gn-Kc5UVB5LwIZhIwGNwK2bN9gikLid1bb8im9Hvfqb2on7K-FiJ1U77fkQSGcMfVbyNeNdbSslIIb-NvtUHQs3Y7jWQBU_TtOyGkcoNkRPXkAYOMaOSgbmZKV3GL4FwuYbO5YfQHomfpIzX5AGk1miPU19lo9IVpPmjJ_youk52pX41rBlTQm6DP76FNMppxC8rXnIDf-o-OMRK_Q0R6QZjUVhpFCBIVNq8P7J4Wm0yTA8QY7A68W2abmC4CU6pa9_ZSYOfcMHypUxIsA9V0nPiCYvOw83jvK2DcFtO3CaAUAiKoj5xdCIXnixNFN-arLa6de0ZOSQRwCxgYxs6w8UhAD-vFapG3cs6dzhYAYDKHuAlKqfaO_z1XToBdjwp0f9eIytJhWVOLLJSVR_1LRvsSc9yDvVk_D4nCeR2BTtevZmw9st1m8pQanqObn_G0qVUHdtkxxalwDdmr_fUEukeSOrzMuQlZ3IjpcKqUXsNqcxqg9uledNLE2yRo6VvXaoWjLOwLvMLBMQ18HGUVbr-I1M-bmX953S2NI43eBjVo0VAYRypBBewSflQE1Ief4xY-cu6-jhRLJYWTpQDup5gOY4O4DLE89GelkP7PsIsm3ZMF_qalOKoqswiEReBCJ4-s1X6Seg4q1kkB6ECT7ZieLmwc,odtNk97a4PARR0I8g3kQpzlFVmPg-udyjfl81fbTioyP2pEw5tP5A1-FVqR-QFFPskW-j7yAze5usYNWHEir7oVQ9d9bbkcZIDEPqwSTO1JoD1BKXeeBK0xsmiSgxeY7uuRXWdhXREhlmIMsV8ObakEeXdbbxbs89XaZHBuES7boASrRVDXRz_mhMu6u_58OdLeMwR3I1BCH6nphNGVOehA7GOOqEBvtesBset0bNaLCb0JpSg5ZW_0AGLP-XydzE3IPLLx4NQEEJY21y8fChxYM4jntI78l5hojp9NlmS69EXlj0PoMjsbaWaz9WtnZaMAbnaOGAHhv8Y_TNmBI0FHpqHaGPP906Mnrgdm3tl2L40EX-Q6-liNVkB56CmPxXzSesu-4x5LLYxQ-aX3W6Hj7RCDTacxqUJHzOrhJqXSx6Jx0t8CwyfReMgVv4p5t1C3OZ8yYbJ_H3LdkeriVniaC5jQdMyIJ6QBMzr1XdXIw9WuEG2kCIYtvOp2qDuu9o2SY-9W4Yv7VWRDfWO38xxR4ZO65MMAdZxeaZ4w8sK_owH46Wm0XoT3Al-LPypaeijWqlHEu4R8c2ersD3xkDvXC_lNtaQw_qyfI3UEH5fWupY4zhZeDGkvXQh32Fv4CxlZL58iUHv9SvR7p5LgBCC3AVUbn7Sqc4xPUCZMj-Tc',\n  '0x26361130d5d6E798E9319114643AF8c868412859': '0x1cf47183f48c17393e2728b92031eb9f56fc7f89011c618e0cb1d163761b7dbe6e615091f15075b673422a0b1bc363d1ab341cbcee831c1632282e33feda79d21c'\n}\n\nconst data = JSON.stringify({ bundle: { items, expiration, salt, version, sigs }})\n/*\n{\n  items: [\n    {\n      tag: 'ethereum-eth-0x0000000000000000000000000000000000000000',\n      chainID: '42',\n      from: '0x26361130d5d6E798E9319114643AF8c868412859',\n      to: '5NPqYBdIsIpJzPeYixuz7BEH_W7BEk_mb8HxBD3OHXo',\n      amount: '1000000000000000'\n    },\n    {\n      tag: 'ethereum-usdt-0xd85476c906b5301e8e9eb58d174a6f96b9dfc5ee',\n      chainID: '42',\n      from: '5NPqYBdIsIpJzPeYixuz7BEH_W7BEk_mb8HxBD3OHXo',\n      to: '0x26361130d5d6E798E9319114643AF8c868412859',\n      amount: '10000000'\n    }\n  ],\n  expiration: 1630490852,\n  salt: '23b35070-c5a5-4c66-94f8-ad6064ab5cfc',\n  version: 'v1',\n  sigs: {\n    '5NPqYBdIsIpJzPeYixuz7BEH_W7BEk_mb8HxBD3OHXo': 'IWoPLghaVs-rD7Gn-Kc5UVB5LwIZhIwGNwK2bN9gikLid1bb8im9Hvfqb2on7K-FiJ1U77fkQSGcMfVbyNeNdbSslIIb-NvtUHQs3Y7jWQBU_TtOyGkcoNkRPXkAYOMaOSgbmZKV3GL4FwuYbO5YfQHomfpIzX5AGk1miPU19lo9IVpPmjJ_youk52pX41rBlTQm6DP76FNMppxC8rXnIDf-o-OMRK_Q0R6QZjUVhpFCBIVNq8P7J4Wm0yTA8QY7A68W2abmC4CU6pa9_ZSYOfcMHypUxIsA9V0nPiCYvOw83jvK2DcFtO3CaAUAiKoj5xdCIXnixNFN-arLa6de0ZOSQRwCxgYxs6w8UhAD-vFapG3cs6dzhYAYDKHuAlKqfaO_z1XToBdjwp0f9eIytJhWVOLLJSVR_1LRvsSc9yDvVk_D4nCeR2BTtevZmw9st1m8pQanqObn_G0qVUHdtkxxalwDdmr_fUEukeSOrzMuQlZ3IjpcKqUXsNqcxqg9uledNLE2yRo6VvXaoWjLOwLvMLBMQ18HGUVbr-I1M-bmX953S2NI43eBjVo0VAYRypBBewSflQE1Ief4xY-cu6-jhRLJYWTpQDup5gOY4O4DLE89GelkP7PsIsm3ZMF_qalOKoqswiEReBCJ4-s1X6Seg4q1kkB6ECT7ZieLmwc,odtNk97a4PARR0I8g3kQpzlFVmPg-udyjfl81fbTioyP2pEw5tP5A1-FVqR-QFFPskW-j7yAze5usYNWHEir7oVQ9d9bbkcZIDEPqwSTO1JoD1BKXeeBK0xsmiSgxeY7uuRXWdhXREhlmIMsV8ObakEeXdbbxbs89XaZHBuES7boASrRVDXRz_mhMu6u_58OdLeMwR3I1BCH6nphNGVOehA7GOOqEBvtesBset0bNaLCb0JpSg5ZW_0AGLP-XydzE3IPLLx4NQEEJY21y8fChxYM4jntI78l5hojp9NlmS69EXlj0PoMjsbaWaz9WtnZaMAbnaOGAHhv8Y_TNmBI0FHpqHaGPP906Mnrgdm3tl2L40EX-Q6-liNVkB56CmPxXzSesu-4x5LLYxQ-aX3W6Hj7RCDTacxqUJHzOrhJqXSx6Jx0t8CwyfReMgVv4p5t1C3OZ8yYbJ_H3LdkeriVniaC5jQdMyIJ6QBMzr1XdXIw9WuEG2kCIYtvOp2qDuu9o2SY-9W4Yv7VWRDfWO38xxR4ZO65MMAdZxeaZ4w8sK_owH46Wm0XoT3Al-LPypaeijWqlHEu4R8c2ersD3xkDvXC_lNtaQw_qyfI3UEH5fWupY4zhZeDGkvXQh32Fv4CxlZL58iUHv9SvR7p5LgBCC3AVUbn7Sqc4xPUCZMj-Tc',\n    '0x26361130d5d6E798E9319114643AF8c868412859': '0x1cf47183f48c17393e2728b92031eb9f56fc7f89011c618e0cb1d163761b7dbe6e615091f15075b673422a0b1bc363d1ab341cbcee831c1632282e33feda79d21c'\n  }\n}\n*/\n")),(0,r.kt)("h2",{id:"external-and-internal-transactions"},"External and internal transactions"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Internal transfers must contain the signatures of all ",(0,r.kt)("inlineCode",{parentName:"li"},"from")," accounts (within all associated internal transfer transactions) for ",(0,r.kt)("inlineCode",{parentName:"li"},"bundleData")),(0,r.kt)("li",{parentName:"ul"},"External transfers can be initiated by any everPay account, not limited to the everPay account of the internal transfer"),(0,r.kt)("li",{parentName:"ul"},"Successful external transfer transaction",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"All signatures of ",(0,r.kt)("inlineCode",{parentName:"li"},"sigs")," in ",(0,r.kt)("inlineCode",{parentName:"li"},"data")," are validated and the internal transfer transaction is successful"),(0,r.kt)("li",{parentName:"ul"},"Any one of the ",(0,r.kt)("inlineCode",{parentName:"li"},"sigs")," in ",(0,r.kt)("inlineCode",{parentName:"li"},"data")," fails, the internal transfer transaction fails, but the external transfer transaction still executes normally"))),(0,r.kt)("li",{parentName:"ul"},"The external transfer transaction fails",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Internal transfer transactions fail at the same time")))),(0,r.kt)("h2",{id:"transaction-signature-sending-and-record-acquisition"},"Transaction signature, sending and record acquisition"),(0,r.kt)("p",null,"Developers can visit the ",(0,r.kt)("a",{parentName:"p",href:"./transaction#messagedata"},"Guide - Dive - Transaction")," chapter for more information."))}u.isMDXComponent=!0}}]);